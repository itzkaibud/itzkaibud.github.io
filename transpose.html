
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lyric Chord Transposer</title>
  <style>
    .chord {
      font-weight: bold;
      margin-right: 5px;
    }
    .lyrics {
      margin-top: 20px;
    }
    .line {
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <h1>Lyric Chord Transposer</h1>

  <div>
    <label for="lyric-input">Enter lyrics:</label>
    <textarea id="lyric-input" rows="5" cols="50" placeholder="Enter lyrics here..."></textarea>
  </div>

  <div>
    <label for="root-note">Select Root Note:</label>
    <select id="root-note">
      <option value="C">C</option>
      <option value="C#">C#</option>
      <option value="D">D</option>
      <option value="D#">D#</option>
      <option value="E">E</option>
      <option value="F">F</option>
      <option value="F#">F#</option>
      <option value="G">G</option>
      <option value="G#">G#</option>
      <option value="A">A</option>
      <option value="A#">A#</option>
      <option value="B">B</option>
    </select>
    
    <label for="chord-type">Select Chord Type:</label>
    <select id="chord-type">
      <option value="major">Major</option>
      <option value="minor">Minor</option>
      <option value="7">Dominant 7</option>
      <option value="maj7">Major 7</option>
      <option value="m7">Minor 7</option>
    </select>

    <button id="add-chord">Add Chord to Lyrics</button>
  </div>

  <div class="lyrics" id="lyrics-container">
    <!-- Generated lyric lines with chords will appear here -->
  </div>

  <input type="range" id="transposer" min="-7" max="7" value="0">
  <label for="transposer">Transpose Chords</label>

  <script>
    const notes = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"];
    const chordTypes = {
      "major": "",
      "minor": "m",
      "7": "7",
      "maj7": "maj7",
      "m7": "m7"
    };

    let lyricLines = [];

    function transposeChord(chord, shift) {
      const note = chord.slice(0, -1);  // Extract root note (e.g. "C" from "Cm" or "Cmaj7")
      const chordType = chord.slice(-1); // Extract chord type (e.g. "m" or "7")
      
      const noteIndex = notes.indexOf(note);
      if (noteIndex === -1) return chord;

      const newIndex = (noteIndex + shift + 12) % 12;
      return notes[newIndex] + chordType;
    }

    function updateChords() {
      const shift = parseInt(document.getElementById('transposer').value);
      const chordElements = document.querySelectorAll('.chord');

      chordElements.forEach(element => {
        const currentChord = element.textContent;
        const transposedChord = transposeChord(currentChord, shift);
        element.textContent = transposedChord;
      });
    }

    function addChordToLyrics() {
      const lyricInput = document.getElementById('lyric-input').value.trim();
      const rootNote = document.getElementById('root-note').value;
      const chordType = document.getElementById('chord-type').value;
      
      if (lyricInput) {
        const chord = rootNote + chordTypes[chordType];
        lyricLines.push({ lyric: lyricInput, chord: chord });

        renderLyrics();
        document.getElementById('lyric-input').value = '';  // Clear input
      }
    }

    function renderLyrics() {
      const lyricsContainer = document.getElementById('lyrics-container');
      lyricsContainer.innerHTML = '';  // Clear previous lyrics
      
      lyricLines.forEach(line => {
        const lineDiv = document.createElement('div');
        lineDiv.classList.add('line');

        const chordSpan = document.createElement('span');
        chordSpan.classList.add('chord');
        chordSpan.textContent = line.chord;

        const lyricSpan = document.createElement('span');
        lyricSpan.textContent = line.lyric;

        lineDiv.appendChild(chordSpan);
        lineDiv.appendChild(lyricSpan);

        lyricsContainer.appendChild(lineDiv);
      });
    }

    document.getElementById('add-chord').addEventListener('click', addChordToLyrics);
    document.getElementById('transposer').addEventListener('input', updateChords);
  </script>
</body>
</html>
